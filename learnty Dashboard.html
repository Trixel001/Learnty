<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Learnty - Home</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&display=swap');

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #0f172a;
            overflow: hidden;
            color: white;
            overscroll-behavior: none;
            margin: 0;
        }

        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Prevent text selection during drag */
        .noselect {
            -webkit-touch-callout: none; 
            -webkit-user-select: none; 
            -khtml-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none; 
            user-select: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        /* --- SOUND FX (Web Audio API) --- */
        const playPing = (type = 'ping') => {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            if (type === 'ping') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 0.3);
            } else {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(400, ctx.currentTime);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 0.1);
            }
        };

        /* --- ICONS --- */
        const UserIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        );
        const StarIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="none" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        );
        const BrainIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>
        );
        const GamepadIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="15" x2="15.01" y1="13" y2="13"/><line x1="18" x2="18.01" y1="11" y2="11"/><rect width="20" height="12" x="2" y="6" rx="2"/></svg>
        );
        const BookLockIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/><rect x="12" y="10" width="6" height="6" rx="1"/></svg>
        );
        const NoteIcon = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
            </svg>
        );

        /* --- BACKGROUND (ROTATING GALAXY - MATCHING ONBOARDING) --- */
        const GalaxyBackground = () => {
            const mountRef = useRef(null);
            useEffect(() => {
                const scene = new THREE.Scene();
                scene.fog = new THREE.FogExp2(0x0f172a, 0.002);
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                mountRef.current.appendChild(renderer.domElement);
                
                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 800;
                const posArray = new Float32Array(particlesCount * 3);
                const colors = new Float32Array(particlesCount * 3);
                const colorTeal = new THREE.Color("#0d9488");
                const colorWhite = new THREE.Color("#ffffff");
                
                for(let i = 0; i < particlesCount * 3; i+=3) {
                    posArray[i] = (Math.random() - 0.5) * 15;
                    posArray[i+1] = (Math.random() - 0.5) * 15;
                    posArray[i+2] = (Math.random() - 0.5) * 15;
                    const mixedColor = Math.random() > 0.6 ? colorTeal : colorWhite;
                    colors[i] = mixedColor.r;
                    colors[i+1] = mixedColor.g;
                    colors[i+2] = mixedColor.b;
                }
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
                const material = new THREE.PointsMaterial({ size: 0.04, vertexColors: true, transparent: true, opacity: 0.8 });
                const particlesMesh = new THREE.Points(particlesGeometry, material);
                scene.add(particlesMesh);
                camera.position.z = 5;
                
                let time = 0;
                const animate = () => {
                    requestAnimationFrame(animate);
                    time += 0.001;
                    particlesMesh.rotation.y = time * 0.5; // Restore rotation (Y axis)
                    particlesMesh.rotation.x = time * 0.2; // Restore rotation (X axis)
                    renderer.render(scene, camera);
                };
                animate();
                
                const handleResize = () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                };
                window.addEventListener('resize', handleResize);
                return () => {
                    window.removeEventListener('resize', handleResize);
                    if(mountRef.current) mountRef.current.innerHTML = '';
                };
            }, []);
            return <div ref={mountRef} className="fixed top-0 left-0 w-full h-full z-0 pointer-events-none" />;
        };

        /* --- REVIEW BUTTON COMPONENT --- */
        const ReviewButton = () => {
            const [isExpanded, setIsExpanded] = useState(false);
            const [textIndex, setTextIndex] = useState(0);
            const messages = ["Wanna rate us?", "Drop a review", "We need feedback", "Loving Learnty?"];
            
            useEffect(() => {
                const cycle = setInterval(() => {
                    setIsExpanded(true);
                    setTimeout(() => {
                        setIsExpanded(false);
                        setTimeout(() => {
                            setTextIndex(prev => (prev + 1) % messages.length);
                        }, 500);
                    }, 3000);
                }, 8000); 
                return () => clearInterval(cycle);
            }, []);

            return (
                <div className="fixed bottom-8 right-6 z-50 flex items-center justify-end pointer-events-auto">
                    <button 
                        onClick={() => playPing('click')}
                        className="group flex items-center relative outline-none"
                    >
                        <div 
                            className={`
                                absolute right-full mr-4
                                flex items-center justify-end overflow-hidden
                                transition-all duration-500 ease-out
                                ${isExpanded ? 'w-40 opacity-100' : 'w-0 opacity-0'}
                            `}
                        >
                             <div className="bg-slate-800/90 backdrop-blur border border-slate-700 text-slate-300 text-sm font-bold py-2.5 px-4 rounded-xl whitespace-nowrap shadow-xl">
                                {messages[textIndex]}
                             </div>
                        </div>

                        <div className="w-14 h-14 bg-[#0d9488] hover:bg-[#0f766e] rounded-full flex items-center justify-center shadow-[0_0_20px_#0d9488] transition-transform group-hover:scale-110 group-active:scale-90 z-10">
                            <StarIcon className="w-6 h-6 text-white group-hover:rotate-[72deg] transition-transform duration-500" />
                        </div>
                    </button>
                </div>
            );
        };

        /* --- FEATURE CARD (UPDATED WITH DESCRIPTION) --- */
        const FeatureCard = ({ title, description, icon: Icon, color, isLocked, onClick }) => {
            return (
                <div 
                    onClick={onClick}
                    className={`
                        relative 
                        w-[260px] h-[320px] 
                        rounded-3xl p-6 flex flex-col justify-between 
                        transition-all duration-300 transform 
                        border border-white/10 backdrop-blur-lg bg-slate-900/60
                        group cursor-pointer select-none
                        hover:shadow-[0_10px_40px_-10px_rgba(0,0,0,0.5)]
                        ${isLocked ? 'grayscale opacity-60 cursor-not-allowed' : 'hover:scale-[1.02] hover:bg-slate-800/80 hover:border-white/20'}
                    `}
                >
                    {/* Inner Gradient Glow */}
                    <div className="absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 pointer-events-none" 
                         style={{ background: `radial-gradient(circle at top right, ${color}, transparent 70%)` }}></div>
                    
                    <div className="relative z-10 flex flex-col h-full">
                        <div className="flex justify-between items-start mb-4">
                            <div className={`p-3.5 rounded-2xl bg-slate-950/60 border border-white/5 text-white shadow-inner`}>
                                <Icon className="w-8 h-8" />
                            </div>
                            {isLocked && (
                                <span className="text-[11px] font-black uppercase tracking-wider text-slate-400 bg-slate-950/80 px-3 py-1 rounded-full border border-slate-800">
                                    Locked
                                </span>
                            )}
                        </div>

                        <div className="mt-auto">
                            <h3 className="text-2xl font-bold font-['Space_Grotesk'] leading-tight mb-2 text-white">
                                {title}
                            </h3>
                            {/* Description Text */}
                            <p className="text-sm text-slate-300/80 font-medium leading-snug mb-4 opacity-90 group-hover:opacity-100 transition-opacity">
                                {description}
                            </p>
                            
                            <div className="h-1.5 w-10 rounded-full transition-all duration-300 group-hover:w-full" style={{ backgroundColor: color }}></div>
                        </div>
                    </div>
                </div>
            );
        };

        /* --- INFINITE INTERACTIVE CAROUSEL --- */
        const InfiniteCarousel = ({ items }) => {
            const containerRef = useRef(null);
            const [offset, setOffset] = useRefState(0);
            const [isDragging, setIsDragging] = useState(false);
            
            const lastX = useRef(0);
            const velocity = useRef(-0.5);
            const dragStartPos = useRef(0);
            
            const displayItems = [...items, ...items, ...items];
            const itemWidth = 260 + 32; 
            const totalSetWidth = items.length * itemWidth;

            useEffect(() => {
                let animationFrameId;
                
                const loop = () => {
                    if (!isDragging) {
                        setOffset(prev => {
                            let next = prev + velocity.current;
                            if (next <= -totalSetWidth) return next + totalSetWidth;
                            if (next > 0) return next - totalSetWidth;
                            return next;
                        });
                    }
                    animationFrameId = requestAnimationFrame(loop);
                };
                loop();
                return () => cancelAnimationFrame(animationFrameId);
            }, [isDragging, totalSetWidth]);

            function useRefState(initialValue) {
                const [state, setState] = useState(initialValue);
                const stateRef = useRef(state);
                const setRefState = useCallback((arg) => {
                    const newVal = typeof arg === 'function' ? arg(stateRef.current) : arg;
                    stateRef.current = newVal;
                    setState(newVal);
                }, []);
                return [state, setRefState];
            }

            const handleStart = (clientX) => {
                setIsDragging(true);
                lastX.current = clientX;
                dragStartPos.current = clientX;
                velocity.current = 0; 
            };

            const handleMove = (clientX) => {
                if (!isDragging) return;
                const delta = clientX - lastX.current;
                lastX.current = clientX;
                setOffset(prev => prev + delta);
            };

            const handleEnd = () => {
                setIsDragging(false);
                velocity.current = -0.5; 
            };

            const onMouseDown = (e) => handleStart(e.clientX);
            const onMouseMove = (e) => handleMove(e.clientX);
            const onMouseUp = () => handleEnd();
            const onMouseLeave = () => { if (isDragging) handleEnd(); };
            const onTouchStart = (e) => handleStart(e.touches[0].clientX);
            const onTouchMove = (e) => handleMove(e.touches[0].clientX);
            const onTouchEnd = () => handleEnd();

            const handleCardClick = (item, e) => {
                const dragDistance = Math.abs(lastX.current - dragStartPos.current);
                if (dragDistance < 5 && !item.isLocked) {
                    playPing('ping');
                    console.log("Clicked:", item.title);
                }
            };

            return (
                <div 
                    className="w-full h-full overflow-hidden flex items-center cursor-grab active:cursor-grabbing touch-none relative z-10"
                    onMouseDown={onMouseDown}
                    onMouseMove={onMouseMove}
                    onMouseUp={onMouseUp}
                    onMouseLeave={onMouseLeave}
                    onTouchStart={onTouchStart}
                    onTouchMove={onTouchMove}
                    onTouchEnd={onTouchEnd}
                >
                    <div 
                        ref={containerRef}
                        className="flex gap-8 pl-8 pointer-events-none"
                        style={{ transform: `translateX(${offset}px)`, willChange: 'transform' }}
                    >
                        {displayItems.map((feature, index) => (
                            <div key={`${feature.id}-${index}`} className="shrink-0 pointer-events-auto">
                                <FeatureCard 
                                    {...feature} 
                                    onClick={(e) => handleCardClick(feature, e)} 
                                />
                            </div>
                        ))}
                    </div>
                    
                    <div className="absolute left-0 top-0 bottom-0 w-12 bg-gradient-to-r from-[#0f172a] to-transparent pointer-events-none z-20"></div>
                    <div className="absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-[#0f172a] to-transparent pointer-events-none z-20"></div>
                </div>
            );
        };

        /* --- MAIN HOME PAGE --- */
        const HomePage = () => {
            // UPDATED FEATURES DATA
            const features = [
                { 
                    id: 1, 
                    title: "Learnie", 
                    description: "Smart interactive learning buddy", 
                    icon: BrainIcon, 
                    color: "#2dd4bf", 
                    isLocked: false 
                },
                { 
                    id: 2, 
                    title: "Topic to Game", 
                    description: "Transform topics to games", 
                    icon: GamepadIcon, 
                    color: "#a855f7", 
                    isLocked: false 
                },
                { 
                    id: 3, 
                    title: "AI Note", 
                    description: "Faster, smarter and easier note taking", 
                    icon: NoteIcon, 
                    color: "#38bdf8", 
                    isLocked: false 
                },
                { 
                    id: 4, 
                    title: "Book to Game", 
                    description: "Turn books into games", 
                    icon: BookLockIcon, 
                    color: "#f59e0b", 
                    isLocked: true 
                },
            ];

            return (
                <div className="relative w-full h-[100dvh] flex flex-col overflow-hidden select-none">
                    <GalaxyBackground />

                    <header className="w-full p-6 md:p-8 flex justify-between items-center z-30">
                        <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-[#0d9488] rounded-xl flex items-center justify-center shadow-[0_0_15px_#0d9488]">
                                <span className="font-bold text-white text-xl font-['Space_Grotesk']">L</span>
                            </div>
                            <span className="font-bold text-xl tracking-wide text-white font-['Space_Grotesk']">Learnty</span>
                        </div>

                        <button onClick={() => playPing('click')} className="w-10 h-10 bg-slate-800/60 backdrop-blur rounded-full flex items-center justify-center border border-slate-600/50 hover:border-[#0d9488] transition-colors hover:bg-slate-700">
                            <UserIcon className="w-5 h-5 text-slate-300" />
                        </button>
                    </header>

                    <main className="flex-1 relative flex flex-col justify-center">
                        <InfiniteCarousel items={features} />
                    </main>

                    <ReviewButton />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HomePage />);
    </script>
</body>
</html>


